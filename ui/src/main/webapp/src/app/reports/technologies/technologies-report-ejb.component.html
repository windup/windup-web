<ng-container>
    <div class="header-bar">
        <h2>Technologies &gt; {{title}}</h2>
        <div class="search-and-create">
            <div class="search-and-create"  *ngIf="true">
                <wu-search [(searchValue)]="searchText" (searchValueChange)="updateSearch()"></wu-search>
            </div>
        </div>
    </div>

    <div class="panel panel-default panel-primary wu-data-table">
        <div class="panel-heading">
            <h3 class="panel-title">Message Driven Beans</h3>
        </div>
        <div class="panel-body">
            <wu-all-data-filtered-message
                    [filteredItems]="filteredEjbMessageDriven"
                    [unfilteredItems]="ejbMessageDriven"
                    (clearFilter)="clearSearch()"
                    *ngIf="!loadingMDB; else loadingData">
                <table class="table table-bordered table-hover" *ngIf="filteredEjbMessageDriven.length > 0; else noDataAvailable">
                    <thead wu-sortable-table
                           [(sortedData)]="sortedEjbMessageDriven" [data]="filteredEjbMessageDriven"
                           [tableHeaders]="[
                        { title: 'MDB Name', isSortable: true, sortBy: 'name' },
                        { title: 'Class', isSortable: true, sortBy: 'class'},
                        { title: 'JMS Destination', isSortable: true, sortBy: 'location'}
                    ]">
                    </thead>
                    <tbody>
                    <tr *ngFor="let mdb of this.sortedEjbMessageDriven">
                        <td class="col-md-4">{{mdb.name}}</td>
                        <td class="col-md-6"><a [routerLink]="['../source/' + mdb.sourceVertexId]">{{mdb.class}}</a></td>
                        <td class="col-md-2">{{mdb.location}}</td>
                    </tr>
                    </tbody>
                </table>
            </wu-all-data-filtered-message>
        </div>
    </div>

    <!-- L&F "static report" -->
    <!--            <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title">Message Driven Beans</h3>
                    </div>
                    <table class="table table-striped table-bordered" id="mdbTable">
                        <thead wu-sortable-table [tableHeaders]="[
                                    { title: 'MDB Name', isSortable: true, sortBy: 'beanName' },
                                    { title: 'Class', isSortable: false, sortBy: 'ejbClass?.qualifiedName'},
                                    { title: 'JMS Destination', isSortable: false, sortBy: '' }
                                ]">
                        <tr>
                            <th class="col-md-2">MDB Name</th>
                            <th>Class</th>
                            <th class="col-md-3">JMS Destination</th>
                        </tr>
                        </thead>
                        <tr *ngFor="let value of this.filteredEjbMessageDriven">
                            <td>{{value?.beanName}}</td>
                            <td><a [routerLink]="['../source/' + ((value?.ejbClass | async)?.decompiledSource | async)?.vertexId]">{{(value?.ejbClass | async)?.qualifiedName}}</a></td>
                            <td>{{(value?.destination | async)?.jndiLocation}}</td>
                        </tr>
                    </table>
                </div>-->

    <!-- L&F "issues report" but with a full width table -->
    <!--            <div class="panel panel-primary wuTechnologies">
                    <div class="panel-heading">
                        <h3 class="panel-title">Message Driven Beans</h3>
                    </div>
                    <table class="table table-striped table-bordered" id="mdbTable">
                        <thead wu-sortable-table [tableHeaders]="[
                                    { title: 'MDB Name', isSortable: true, sortBy: 'beanName' },
                                    { title: 'Class', isSortable: false, sortBy: 'ejbClass?.qualifiedName'},
                                    { title: 'JMS Destination', isSortable: false, sortBy: '' }
                                ]">
                        </thead>
                        <tr *ngFor="let value of this.filteredEjbMessageDriven">
                            <td>{{value?.beanName}}</td>
                            <td><a [routerLink]="['../source/' + ((value?.ejbClass | async)?.decompiledSource | async)?.vertexId]">{{(value?.ejbClass | async)?.qualifiedName}}</a></td>
                            <td>{{(value?.destination | async)?.jndiLocation}}</td>
                        </tr>
                    </table>
                </div>-->

    <div class="panel panel-default panel-primary wu-data-table">
        <div class="panel-heading">
            <h3 class="panel-title">Stateless Session Beans</h3>
        </div>
        <div class="panel-body">
            <wu-all-data-filtered-message
                    [filteredItems]="filteredEjbSessionStatelessBean"
                    [unfilteredItems]="ejbSessionStatelessBean"
                    (clearFilter)="clearSearch()"
                    *ngIf="!loadingEJBStateless; else loadingData">
                <table class="table table-bordered table-hover" *ngIf="filteredEjbSessionStatelessBean.length > 0; else noDataAvailable">
                    <thead wu-sortable-table
                           [(sortedData)]="sortedEjbSessionStatelessBean" [data]="filteredEjbSessionStatelessBean"
                           [tableHeaders]="[
                            { title: 'Bean Name', isSortable: true, sortBy: 'name' },
                            { title: 'Interface', isSortable: true, sortBy: 'interface'},
                            { title: 'Implementation', isSortable: true, sortBy: 'class'},
                            { title: 'JNDI Location', isSortable: true, sortBy: 'location'}
                        ]">
                    </thead>
                    <tbody>
                        <tr *ngFor="let value of this.sortedEjbSessionStatelessBean">
                            <td class="col-md-2">{{value.name}}</td>
                            <td class="col-md-2">{{value.interface}}</td>
                            <td class="col-md-6"><a [routerLink]="['../source/' + value.sourceVertexId]">{{value.class}}</a></td>
                            <td class="col-md-2">{{value.location}}</td>
                        </tr>
                    </tbody>
                </table>
            </wu-all-data-filtered-message>
        </div>
    </div>

    <div class="panel panel-default panel-primary wu-data-table">
        <div class="panel-heading">
            <h3 class="panel-title">Stateful Session Beans</h3>
        </div>
        <div class="panel-body">
            <wu-all-data-filtered-message
                    [filteredItems]="filteredEjbSessionStatefulBean"
                    [unfilteredItems]="ejbSessionStatefulBean"
                    (clearFilter)="clearSearch()"
                    *ngIf="!loadingEJBStateful; else loadingData">
                <table class="table table-bordered table-hover" *ngIf="filteredEjbSessionStatefulBean.length > 0; else noDataAvailable">
                    <thead wu-sortable-table
                           [(sortedData)]="sortedEjbSessionStatefulBean" [data]="filteredEjbSessionStatefulBean"
                           [tableHeaders]="[
                            { title: 'Bean Name', isSortable: true, sortBy: 'name' },
                            { title: 'Interface', isSortable: true, sortBy: 'interface'},
                            { title: 'Implementation', isSortable: true, sortBy: 'class'},
                            { title: 'JNDI Location', isSortable: true, sortBy: 'location'}
                        ]">
                    </thead>
                    <tbody>
                    <tr *ngFor="let value of this.sortedEjbSessionStatefulBean">
                        <td class="col-md-2">{{value.name}}</td>
                        <td class="col-md-2">{{value.interface}}</td>
                        <td class="col-md-6"><a [routerLink]="['../source/' + value.sourceVertexId]">{{value.class}}</a></td>
                        <td class="col-md-2">{{value.location}}</td>
                    </tr>
                    </tbody>
                </table>
            </wu-all-data-filtered-message>
        </div>
    </div>

    <div class="panel panel-default panel-primary wu-data-table">
        <div class="panel-heading">
            <h3 class="panel-title">Entity Beans</h3>
        </div>
        <div class="panel-body">
            <wu-all-data-filtered-message
                    [filteredItems]="filteredEjbEntityBean"
                    [unfilteredItems]="ejbEntityBean"
                    (clearFilter)="clearSearch()"
                    *ngIf="!loadingEntity; else loadingData">
                <table class="table table-bordered table-hover" *ngIf="filteredEjbEntityBean.length > 0; else noDataAvailable">
                    <thead wu-sortable-table
                           [(sortedData)]="sortedEjbEntityBean" [data]="filteredEjbEntityBean"
                           [tableHeaders]="[
                            { title: 'Bean Name', isSortable: true, sortBy: 'name' },
                            { title: 'Interface', isSortable: true, sortBy: 'interface'},
                            { title: 'Implementation', isSortable: true, sortBy: 'class'},
                            { title: 'JNDI Location', isSortable: true, sortBy: 'location'}
                        ]">
                    </thead>
                    <tbody>
                    <tr *ngFor="let value of this.sortedEjbEntityBean">
                        <td class="col-md-2">{{value.name}}</td>
                        <td class="col-md-2">{{value.interface}}</td>
                        <td class="col-md-6"><a [routerLink]="['../source/' + value.sourceVertexId]">{{value.class}}</a></td>
                        <td class="col-md-2">{{value.location}}</td>
                    </tr>
                    </tbody>
                </table>

            </wu-all-data-filtered-message>
        </div>
    </div>
</ng-container>


<ng-template #loadingData>
    <span>Loading...</span>
</ng-template>

<ng-template #noDataAvailable>
    <span>There are no beans of this type.</span>
</ng-template>
